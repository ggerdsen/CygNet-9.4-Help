<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en" xml:lang="en" data-mc-search-type="Stem" data-mc-help-system-file-name="CygNet.xml" data-mc-path-to-help-system="../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="History|VHS Utilities">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>VHS Check Utility</title>
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Resources/TableStyles/NoBorder8.css" rel="stylesheet" />
        <link href="../../Resources/Stylesheets/HTML5.css" rel="stylesheet" />
        <script src="../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <div class="MCBreadcrumbsBox_0"><a class="MCBreadcrumbsLink" href="History.htm">History</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="VHS Utilities.htm">VHS Utilities</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">VHS Check Utility</span>
        </div>
        <h2>VHS Check Utility</h2>
        <p>The <b>VHS Check</b> utility performs a data integrity check on the VHS database. The check is required whenever the VHS is abnormally shut down. Events that can cause an abnormal shut down include power loss to the host SERVER, killing the VHS (using task manager or from the service screen), or other anomalies. If corruption errors are found, the utility will repair them. If such errors are left unaddressed, future unexpected shutdowns might occur.</p>
        <p>If the VHS is running as a system service controlled by the Remote Service Manager (RSM), the only notice you will receive of improper shutdown detection will be in the VHS log file (unless you are using SVCMON to monitor it). Therefore, it is imperative to be mindful of the status of your VHS in the RSM after any unexpected system shutdowns.</p>
        <p>You can configure the VHS to automatically run VHS Check by enabling the <a href="../Service Configuration Keywords/VHS Configuration File Keywords.htm#VHS">VHS Check Keywords</a> in the VHS configuration file (Vhs.cfg). </p>
        <div class="Note">
            <p><span class="NoteHeading">Note:</span> If using <a href="VHS Quick Recovery.htm">VHS Quick Recovery</a> the automatic service check is not applicable. </p>
        </div>
        <div class="Note">
            <p><span class="NoteHeading">Warning:</span> <span class="CygNetVariablesSoftwareName">CygNet Software</span> recommends that you do not run the VHS Check utility on a "dirty" database. See <a href="VHS Quick Recovery.htm">VHS Quick Recovery</a> for more information. If you wish to run VHS check on a "dirty" database, make a copy of the files before running the check. This preserves the "dirty" database in its failed state in case further analysis by <a href="../CygNet Software/Contact CygNet Support.htm" class="MCTopicPopup MCTopicPopupHotSpot a aPopup" title="CygNet Support contact information" data-mc-width="500px" data-mc-height="auto">CygNet Support</a> is necessary.</p>
        </div>
        <p>The results of VHS Check are written to a log file. The name of the file is VhsCheck001.log (the previous session’s file is named ~ VhsCheck001.log). This file is stored in the folder from which the utility was run. The log file lists the points for which the check was run and results of the check.</p>
        <div class="Note">
            <p><span class="NoteHeading">Note:</span> While the VHS legacy datastore type is now obsolete, you can still run any VHS utility against a VHS legacy datastore.</p>
        </div>
        <p>VHS Check is stored in the <b>CygNet\Utilities</b> directory (VhsCheck.exe) on the host server. The VHS must be stopped to run this utility.</p>
        <h4>64-bit VHS Check Utility</h4>
        <p>A 64-bit version of the VHS Check utility (VhsCheck64.exe) is also available.  It can handle larger data sets associated with 64-bit services. The 64-bit utility can be installed using the <a href="../CygNet Client Installer/CygNet Client Installer.htm">CygNet Client Installer</a>: select <b>VHS Check Utility - 64-bit</b> from the APPS/UTILS folder.</p>
        <h3>Starting VHS Check</h3>
        <h4>Installing and Launching</h4>
        <p>To install and launch (start) the application or utility using <a href="../Version Management/Version Management Overview.htm">version management</a>:</p>
        <ul>
            <li value="1">Use <a href="../CygNet Client Installer/CygNet Client Installer.htm">CygNet Client Installer</a> to install and launch the application. Once installed you can use CygNet Client Installer to start the application.</li>
        </ul>
        <p class="Indent">-OR-</p>
        <ul>
            <li value="1">If previously installed, click <b>Start</b> &gt; <b>All Programs</b> &gt; <b>CygNet</b> &gt; &lt;<i style="font-weight: bold;">name of the application or utility</i>&gt; or double-click the desktop shortcut.</li>
        </ul>
        <p>Alternatively, browse to the <b>CygNet\Utilities</b> directory using Windows Explorer and double-click the program icon. You can also start an application or utility from a <a href="../Utilities/Running a Command Line Utility.htm">command line</a>. These methods do not provide version management. </p>
        <p>The <b>VHS Check Utility</b> dialog box appears.</p>
        <p class="Image">
            <img src="../../Resources/Images/History/VHS Check.png" />
        </p>
        <p class="HeadingProcedure">To Use VHS Check</p>
        <ol>
            <li value="1">Stop the VHS.</li>
            <li value="2">Open the utility.</li>
            <li value="3">Indicate the <b>Path</b> to the offline datastore file(s).</li>
        </ol>
        <div class="Note">
            <p><span class="NoteHeading">Note:</span> If the offline datastore is split (for example, the main datastore file (<b>history.edb</b>) is in one location and the transaction log files (<b>\txlogs</b>) are in another location) the <b>VHS Import Export</b> utility will determine this from the service configuration file. </p>
        </div>
        <ol data-mc-continue="true">
            <li value="4">Click <b>Limit points…</b> if you want to run the check on select points. See <a href="VHS Check Limiting Points.htm">Limiting Points</a> for more information.</li>
            <li value="5">Click <b>Check options…</b> and select a check option. See <a href="VHS Check Configuring Options.htm">Configuring Check Options</a> for more information.</li>
            <li value="6">Check <b>Fix errors when found</b> to repair any detected errors.</li>
            <li value="7">Click <b>Run</b>. See <a href="VHS Check Possible Errors.htm">Possible Errors</a> for an explanation of the Repair Summary.</li>
            <li value="8">Once the utility is complete, click <b>Close</b> and restart the VHS.</li>
        </ol>
        <h3>Error Message</h3>
        <p>If you receive an error message warning you that the history file set does not match, see <a href="VHS Data Storage.htm#VHS">VHS File Synchronization</a> for more information.</p>
        <div class="Note">
            <p><span class="NoteHeading">Note:</span> Make sure the datastore version you are currently using (1 for legacy datastore or 2 for ESE-based datastore) is specified in the VHS service configuration file. If the datastore version is not specified, and both datastore versions exist, the utility will fail to run.</p>
        </div>
        <hr />
        <p class="More">More:
		</p>
        <p class="HyperlinkList">
            <img src="../../Resources/Images/Shared Images/arrow.gif" class="More_arrow" title="Arrow" alt="Arrow" /><a class="More" href="VHS Check Limiting Points.htm">Limiting Points</a>
        </p>
        <p class="HyperlinkList">
            <img src="../../Resources/Images/Shared Images/arrow.gif" class="More_arrow" title="Arrow" alt="Arrow" /><a class="More" href="VHS Check Configuring Options.htm">Configuring Check Options</a>
        </p>
        <p class="HyperlinkList">
            <img src="../../Resources/Images/Shared Images/arrow.gif" class="More_arrow" title="Arrow" alt="Arrow" /><a class="More" href="VHS Check Possible Errors.htm">Possible Errors</a>
        </p><a href="#top" class="selected"><img src="../../Resources/Images/Shared Images/Arrow_top.png" style="float: right;padding-top: 6px;padding-right: 2px;padding-bottom: 2px;" title="Back to top" alt="Back to top" /></a>
        <hr width="100%" size="1" />
        <table style="width: 100%;margin-left: 0;margin-right: auto;mc-table-style: url('../../Resources/TableStyles/NoBorder8.css');" summary="MasterFooter" class="TableStyle-NoBorder8" cellspacing="0">
            <col class="TableStyle-NoBorder8-Column-Column1" />
            <col class="TableStyle-NoBorder8-Column-Column1" />
            <tbody>
                <tr class="TableStyle-NoBorder8-Body-Body1">
                    <td class="TableStyle-NoBorder8-BodyB-Column1-Body1">
                        <p><a href="mailto:softwaredocs.feedback@weatherford.com?subject=Documentation%20feedback"><img src="../../Resources/Images/Shared Images/Feedback_footer.png" alt="Let us know how we can improve this topic." title="Let us know how we can improve this topic." class="Inline" /></a>
                        </p>
                    </td>
                    <td class="TableStyle-NoBorder8-BodyA-Column1-Body1">
                        <p class="MasterFooterContact"><a href="https://www.weatherford.com/en/products-and-services/production/production-4-0/iot-scada-platform//" target="_blank"><img src="../../Resources/Images/Shared Images/WFT_31x21.png" alt="CygNet at weatherford.com" title="CygNet at weatherford.com" /></a>
                        </p>
                        <p class="MasterFooterContact">© <span class="CygNetVariablesCurrentYear">2020</span> Weatherford. All rights reserved.</p>
                    </td>
                </tr>
            </tbody>
        </table>
    </body>
</html>